{
  "rules": {
    "admins": {
      ".read": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".write": "auth != null && auth.token.email == 'jashwanthjavili7@gmail.com'"
    },
    "users": {
      ".read": "auth != null",
      "$userId": {
        ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
        ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
        "email": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "displayName": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "photoURL": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "userName": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "guruName": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "iskconCenter": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "isOnline": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "lastSeen": {
          ".write": "auth != null && auth.uid == $userId",
          ".read": "auth != null"
        },
        "entries": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".indexOn": ["date"],
          "$entryId": {
            ".validate": "newData.hasChildren(['date']) && newData.child('date').isString()"
          }
        },
        "settings": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".validate": "newData.hasChildren(['userName', 'guruName', 'iskconCenter', 'themeColor', 'language'])"
        },
        "journal": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".indexOn": ["date"],
          "$journalId": {
            ".validate": "newData.hasChildren(['date', 'content']) && newData.child('date').isString() && newData.child('content').isString()"
          }
        },
        "usage": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')"
        },
        "feedback": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')"
        },
        "chantingSessions": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".indexOn": ["timestamp"]
        },
        "chantingStats": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')"
        },
        "lastFeedback": {
          ".read": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
          ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')"
        }
      }
    },
    "chats": {
      ".read": "auth != null",
      ".write": "auth != null || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com'",
      ".indexOn": ["lastMessageTime"]
    },
    "messages": {
      ".read": "auth != null",
      ".write": "auth != null || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com'",
      ".indexOn": ["timestamp"],
      "$messageId": {
        ".validate": "newData.hasChildren(['text', 'senderId', 'timestamp']) && newData.child('text').isString() && newData.child('senderId').isString() && newData.child('timestamp').isNumber()"
      }
    },
    "typing": {
      ".read": "auth != null",
      ".write": "auth != null"
    },
    "questions": {
      ".read": "auth != null",
      ".write": "auth != null || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com'",
      ".indexOn": ["timestamp", "category"]
    },
    "answers": {
      ".read": "auth != null",
      ".write": "auth != null || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com'",
      ".indexOn": ["timestamp"]
    },
    "slokas": {
      ".read": "auth != null",
      ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')"
    },
    "festivals": {
      ".read": "auth != null",
      ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".indexOn": ["date"]
    },
    "festivalRequests": {
      ".read": "auth != null",
      ".write": "auth != null",
      ".indexOn": ["timestamp", "status", "requesterId"]
    },
    "slokaRequests": {
      ".read": "auth != null",
      ".write": "auth != null",
      ".indexOn": ["timestamp", "status", "requesterId"]
    },
    "appSettings": {
      ".read": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')"
    },
    "flaggedContent": {
      ".read": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".write": "auth != null",
      ".indexOn": ["timestamp", "contentType", "status"]
    },
    "adminNotifications": {
      ".read": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".write": "auth != null",
      ".indexOn": ["timestamp", "type", "read"]
    },
    "userNotifications": {
      "$userId": {
        ".read": "auth != null && auth.uid == $userId",
        ".write": "auth != null && (auth.uid == $userId || root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
        ".indexOn": ["timestamp", "read"]
      }
    },
    "announcements": {
      ".read": "auth != null",
      ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".indexOn": ["timestamp", "type"]
    },
    "broadcasts": {
      ".read": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || auth.token.email == 'jashwanthjavili7@gmail.com')",
      ".indexOn": ["timestamp"]
    }
  }
}
